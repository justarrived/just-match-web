<style media="screen">
  .mat-input-container {
    width: 100%;
  }
</style>
<div class="register-container">

  <div class="sub-header-container">
    <h3 class="sub-header-title">{{"user.register.title" | translate}}</h3>
  </div>

  <div class="register-form-outer-container">
    <div class="register-form-inner-container">

      <form #form="ngForm" (ngSubmit)="onSubmit()">

        <div class="register-form-input-group-header">
          <h4>{{'user.register.form.first.name.header' | translate}} *</h4></div>

          <md-input-container md-is-error [ngClass]="{'has-error': (registerForm.controls['first_name'].touched && !registerForm.controls['first_name'].valid) || serverValidationErrors.first_name}">
            <input mdInput maxlength="50" id="first_name" placeholder="{{'user.register.form.first.name.placeholder' | translate}}" [formControl]="registerForm.controls['first_name']">
            <md-hint *ngIf="registerForm.controls['first_name'].touched && registerForm.controls['first_name'].hasError('required')" [ngStyle]="{'color': 'red'}" align="start">
              {{'user.register.form.first.name.validation.required' | translate}}
            </md-hint>
            <md-hint *ngIf="registerForm.controls['first_name'].hasError('minlength')" [ngStyle]="{'color': 'red'}" align="start">
              {{'user.register.form.first.name.validation.min.length' | translate}}
            </md-hint>
          </md-input-container>

          <md-input-container [ngClass]="{'has-error': (registerForm.controls['last_name'].touched && !registerForm.controls['last_name'].valid) || serverValidationErrors.last_name}">
            <input mdInput maxlength="50" id="last_name" placeholder="{{'user.register.form.last.name.placeholder' | translate}}" [formControl]="registerForm.controls['last_name']">
            <md-hint *ngIf="registerForm.controls['last_name'].touched && registerForm.controls['last_name'].hasError('required')" [ngStyle]="{'color': 'red'}" align="start">
              {{'user.register.form.last.name.validation.required' | translate}}
            </md-hint>
            <md-hint *ngIf="registerForm.controls['last_name'].hasError('minlength')" [ngStyle]="{'color': 'red'}" align="start">
              {{'user.register.form.last.name.validation.min.length' | translate}}
            </md-hint>
          </md-input-container>


        <br><br>
        <div [ngClass]="{'has-error': (registerForm.controls['gender'].touched && !registerForm.controls['gender'].valid) || serverValidationErrors.gender}">
          <md-select placeholder="{{'user.register.form.gender.placeholder' | translate}}" name="gender" [formControl]="registerForm.controls['gender']">
            <md-option *ngFor="let gender of genders" [value]="gender.id">
              {{gender.name}}
            </md-option>
          </md-select>
          <md-hint *ngIf="!registerForm.value.gender && genderInputTouched">
            {{'user.register.form.gender.required' | translate}}
          </md-hint>
        </div>

        <div class="register-form-input-group-header">
          <h4>{{'user.register.form.email.header' | translate}} *</h4></div>

        <md-input-container [ngClass]="{'has-error': (registerForm.controls['email'].touched && !registerForm.controls['email'].valid) || serverValidationErrors.email}">
          <input mdInput maxlength="256" id="email" placeholder="{{'user.register.form.email.placeholder' | translate}}" [formControl]="registerForm.controls['email']">
          <md-hint *ngIf="registerForm.controls['email'].touched && registerForm.controls['email'].hasError('required')" [ngStyle]="{'color': 'red'}" align="start">
            {{'user.register.form.email.validation.required' | translate}}
          </md-hint>
          <md-hint *ngIf="registerForm.controls['email'].hasError('pattern')" [ngStyle]="{'color': 'red'}" align="start">
            {{'user.register.form.email.validation.pattern' | translate}}
          </md-hint>
        </md-input-container>

        <div class="register-form-input-group-header">
          <h4>{{'user.register.form.phone.header' | translate}} *</h4></div>

        <md-input-container [ngClass]="{'has-error': (registerForm.controls['phone'].touched && !registerForm.controls['phone'].valid) || serverValidationErrors.email}">
          <input mdInput maxlength="20" id="email" placeholder="{{'user.register.form.phone.placeholder' | translate}}" [formControl]="registerForm.controls['phone']">
          <md-hint *ngIf="registerForm.controls['phone'].touched && registerForm.controls['phone'].hasError('required')" [ngStyle]="{'color': 'red'}" align="start">
            {{'user.register.form.phone.validation.required' | translate}}
          </md-hint>
        </md-input-container>

        <h4>{{'user.register.form.address.header' | translate}}</h4>
        <md-input-container [ngClass]="{'has-error': (registerForm.controls['street'].touched && !registerForm.controls['street'].valid) || serverValidationErrors.email}">
          <input mdInput maxlength="50" id="email" placeholder="{{'user.register.form.street.placeholder' | translate}}" [formControl]="registerForm.controls['street']">
        </md-input-container>
        <md-input-container [ngClass]="{'has-error': (registerForm.controls['zip'].touched && !registerForm.controls['zip'].valid) || serverValidationErrors.email}">
          <input mdInput maxlength="50" id="email" placeholder="{{'user.register.form.zip.placeholder' | translate}}" [formControl]="registerForm.controls['zip']">
        </md-input-container>
        <md-input-container [ngClass]="{'has-error': (registerForm.controls['city'].touched && !registerForm.controls['city'].valid) || serverValidationErrors.email}">
          <input mdInput maxlength="50" id="email" placeholder="{{'user.register.form.city.placeholder' | translate}}" [formControl]="registerForm.controls['city']">
        </md-input-container>

        <div class="register-form-input-group-header">
          <h4>{{'user.register.form.native.language.header' | translate}} *</h4></div>

        <md-input-container>
          <input mdInput placeholder="{{'user.register.form.native.language.placeholder' | translate}}" [mdAutocomplete]="auto" [formControl]="registerForm.controls['native_language']">
        </md-input-container>
        <md-autocomplete #auto="mdAutocomplete">
          <md-option *ngFor="let language of languages" [value]="language.id">
            {{language.name}}
          </md-option>
        </md-autocomplete>

        <md-input-container>
          <input mdInput placeholder="{{'user.register.form.default.language.placeholder' | translate}}" [mdAutocomplete]="auto" [formControl]="registerForm.controls['default_language']">
          <md-hint *ngIf="!registerForm.value.default_language && defaultLanguageInputTouched" [ngStyle]="{'color': 'red'}" align="start">
            {{'user.register.form.default.language.required' | translate}}
          </md-hint>
        </md-input-container>
        <md-autocomplete #auto="mdAutocomplete">
          <md-option *ngFor="let language of system_languages" [value]="language.id">
            {{language.name}}
          </md-option>
        </md-autocomplete>
        <p class="register-form-input-description-text disabled"><em>{{'user.register.form.default.language.description' | translate}}</em></p>

        <div class="register-form-input-group-header">
          <h4>{{'user.register.form.country.of.origin.header' | translate}} *</h4></div>

        <md-input-container>
          <input mdInput placeholder="{{'user.register.form.country.of.origin.placeholder' | translate}}" [mdAutocomplete]="auto" [formControl]="registerForm.controls['country_of_origin']">
          <md-hint *ngIf="!registerForm.value.country_of_origin && countryOfOriginInputTouched" [ngStyle]="{'color': 'red'}" align="start">
            {{'user.register.form.country.of.origin.required' | translate}}
          </md-hint>
        </md-input-container>
        <md-autocomplete #auto="mdAutocomplete">
          <md-option *ngFor="let country of countries" [value]="country.id">
            {{country.name}}
          </md-option>
        </md-autocomplete>

        <div class="register-form-input-group-header">
          <h4>{{'user.register.form.password.header' | translate}} *</h4></div>

        <md-input-container [ngClass]="{'has-error': (registerForm.controls['password'].touched && !registerForm.controls['password'].valid) || serverValidationErrors.email}">
          <input mdInput type="password" maxlength="50" id="password" placeholder="{{'user.register.form.password.placeholder' | translate}}" [formControl]="registerForm.controls['password']">
          <md-hint *ngIf="registerForm.controls['password'].hasError('minlength')" [ngStyle]="{'color': 'red'}" align="start">
            {{'user.register.form.password.validation.min.length' | translate}}
          </md-hint>
          <!-- <md-hint *ngIf="registerForm.controls['password'].touched && registerForm.controls['password'].hasError('required')" [ngStyle]="{'color': 'red'}" align="start">
            {{'user.register.form.password.validation.required' | translate}}
          </md-hint> -->
        </md-input-container>

        <md-input-container [ngClass]="{'has-error': (registerForm.controls['password'].touched && !registerForm.controls['password'].valid) || serverValidationErrors.email}">
          <input mdInput type="password" maxlength="50" id="repeat_password" placeholder="{{'user.register.form.repeat.password.placeholder' | translate}}" [formControl]="registerForm.controls['repeat_password']">
          <md-hint *ngIf="passwordsSuppliedAndMisMatch()" [ngStyle]="{'color': 'red'}" align="start">
            {{'user.register.form.repeat.password.validation.mismatch' | translate}}
          </md-hint>
        </md-input-container>


        <div class="form-group text-center register-form-input-container register-form-terms-container" [ngClass]="{'has-error':!registerForm.controls['accepted_terms_and_conditions'].valid && registerForm.controls['accepted_terms_and_conditions'].touched}">
          <label for="terms">
            {{'user.register.form.terms.accept' | translate}}
            <a href="/assets/terms/160523_2051-2_Terms_and_Conditions_(en).pdf" target="_blank"> PDF EN</a>,
            <a href="/assets/terms/160520_2051-2_Anvandarvillkor_(sv).pdf" target="_blank"> PDF SV</a>
          </label>
          <input type="checkbox" id="terms" name="terms" class="material-input" [formControl]="registerForm.controls['accepted_terms_and_conditions']">
          <div *ngIf="!registerForm.value.accepted_terms_and_conditions" class="alert alert-danger">{{'user.register.form.terms.validation.required' | translate}}</div>
        </div>

        <div class="register-form-button-container">
          <div *ngIf="saveFail" class="error-message">{{'user.register.form.submit.fail' | translate}}</div>
          <div *ngIf="saveSuccess" class="save-message">{{'user.register.form.submit.success' | translate}}</div>
          <loading *ngIf="loadingSubmit"></loading>
          <button md-raised-button color='primary' *ngIf="!loadingSubmit" type="submit" [disabled]="!formValidation()" class="">{{'user.register.form.submit.button' | translate}}</button>
        </div>
      </form>
    </div>
  </div>
</div>
