<form
  (ngSubmit)="onSubmit()"
  #form="ngForm"
  class="ui form">
  <sm-loader
    [complete]="!loadingSubmit"
    class="inverted"
    text="{{'component.loading' | translate}}">
  </sm-loader>

  <h3 class="ui dividing header">
    {{'user.register.form.general.information.section.header' | translate}}
  </h3>

  <first-name-input
     [control]="registerForm.controls['first_name']"
     [apiErrors]="apiErrors">
   </first-name-input>

  <last-name-input
    [control]="registerForm.controls['last_name']"
     [apiErrors]="apiErrors">
   </last-name-input>

  <email-input
    [control]="registerForm.controls['email']"
    [apiErrors]="apiErrors">
  </email-input>

  <phone-input
    [control]="registerForm.controls['phone']"
    [apiErrors]="apiErrors">
  </phone-input>

  <gender-input
    [control]="registerForm.controls['gender']"
    [apiErrors]="apiErrors">
  </gender-input>

  <h3 class="ui dividing header">
    {{'user.register.form.address.section.header' | translate}}
  </h3>

  <address-input
    [streetControl]="registerForm.controls['street']"
    [zipControl]="registerForm.controls['zip']"
    [cityControl]="registerForm.controls['city']"
    [apiErrors]="apiErrors">
  </address-input>

  <h3 class="ui dividing header">
    {{'user.register.form.country.and.languages.section.header' | translate}}
  </h3>

  <div class="field">
    <sm-select
     [control]="registerForm.controls['native_language']"
     [data]="languages | async"
     [label]="('user.register.form.native.language.header' | translate) + ' *'"
     [placeholder]="'user.register.form.native.language.placeholder' | translate"
     class="fluid search">
      <option
        [value]="language.id"
        *ngFor="let language of languages | async">
        {{language.translated.name}}
      </option>
    </sm-select>
    <input-errors
      [apiErrors]="apiErrors"
      [control]="registerForm.controls['native_language']"
      apiAttribute="language_ids">
    </input-errors>
  </div>

  <system-language-input
    [control]="registerForm.controls['language']"
    [apiErrors]="apiErrors">
  </system-language-input>

  <country-of-origin-input
    [control]="registerForm.controls['country_of_origin']"
    [apiErrors]="apiErrors">>
  </country-of-origin-input>

  <h3 class="ui dividing header">
    {{'user.register.form.password.section.header' | translate}}
  </h3>

  <password-input
     [control]="registerForm.controls['password']"
     [apiErrors]="apiErrors">
   </password-input>

  <div class="field">
    <sm-input
      [control]="registerForm.controls['repeat_password']"
      [label]="('user.register.form.repeat.password.header' | translate) + ' *'"
      [placeholder]="'user.register.form.repeat.password.placeholder' | translate"
      class="left"
      icon="lock"
      type="password">
    </sm-input>
    <input-error
      [label]="'user.register.form.repeat.password.validation.mismatch' | translate"
      [visible]="passwordsSuppliedAndMisMatch()">
    </input-error>
  </div>

  <div class="field">
    <sm-checkbox
      [control]="registerForm.controls['accepted_terms_and_conditions']"
      [label]="('user.register.form.terms.accept' | translate) + ' *'">
    </sm-checkbox>
    <a
      href="/assets/terms/160523_2051-2_Terms_and_Conditions_(en).pdf"
      target="_blank">
       PDF EN
    </a>,
    <a
      href="/assets/terms/160520_2051-2_Anvandarvillkor_(sv).pdf"
      target="_blank">
       PDF SV
     </a>
    <input-errors
      [apiErrors]="apiErrors"
      [control]="registerForm.controls['accepted_terms_and_conditions']"
      apiAttribute="consent">
    </input-errors>
  </div>

  <div class="register-form-button-container">
    <div
      *ngIf="saveFail"
      class="error-message">
      {{'user.register.form.submit.fail' | translate}}
    </div>
    <div
      *ngIf="saveSuccess"
      class="save-message">
      {{'user.register.form.submit.success' | translate}}
    </div>
    <button
      *ngIf="!loadingSubmit"
      class="register-form-button btn-primary btn-small btn"
      type="submit">
      {{'user.register.form.submit.button' | translate}}
    </button>
  </div>
</form>
